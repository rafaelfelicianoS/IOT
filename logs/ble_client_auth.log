2025-12-30 00:13:40.482 | INFO     | __main__:main:306 | ============================================================
2025-12-30 00:13:40.483 | INFO     | __main__:main:307 |   Cliente BLE com Autentica√ß√£o X.509
2025-12-30 00:13:40.483 | INFO     | __main__:main:308 | ============================================================
2025-12-30 00:13:40.483 | INFO     | __main__:main:309 | 
üì± Client NID: 69f0365f...
2025-12-30 00:13:40.483 | INFO     | __main__:main:315 | 
üîê Carregando certificados...
2025-12-30 00:13:40.483 | INFO     | common.security.certificate_manager:__init__:57 | CertificateManager inicializado para 69f0365f...
2025-12-30 00:13:40.484 | INFO     | common.security.certificate_manager:__init__:58 |    Diret√≥rio de certificados: /home/rafa/IOT/IOT/certs
2025-12-30 00:13:40.484 | INFO     | common.security.certificate_manager:initialize:150 | ============================================================
2025-12-30 00:13:40.484 | INFO     | common.security.certificate_manager:initialize:151 | A carregar certificados...
2025-12-30 00:13:40.484 | INFO     | common.security.certificate_manager:initialize:152 | ============================================================
2025-12-30 00:13:40.484 | ERROR    | common.security.certificate_manager:load_ca_certificate:124 | Certificado da CA n√£o encontrado: /home/rafa/IOT/IOT/certs/ca_certificate.pem
2025-12-30 00:13:40.485 | ERROR    | __main__:main:319 | ‚ùå Erro ao carregar certificados
2025-12-30 00:13:40.485 | ERROR    | __main__:main:320 | 
Verifique se existem certificados para este dispositivo:
2025-12-30 00:13:40.485 | ERROR    | __main__:main:321 |   certs/69f0365f-0b47-4449-8c75-558f4537cf85/certificate.pem
2025-12-30 00:13:40.485 | ERROR    | __main__:main:322 |   certs/69f0365f-0b47-4449-8c75-558f4537cf85/private_key.pem
2025-12-30 00:13:40.486 | ERROR    | __main__:main:323 |   certs/ca_certificate.pem
2025-12-30 00:13:48.792 | INFO     | __main__:main:306 | ============================================================
2025-12-30 00:13:48.792 | INFO     | __main__:main:307 |   Cliente BLE com Autentica√ß√£o X.509
2025-12-30 00:13:48.792 | INFO     | __main__:main:308 | ============================================================
2025-12-30 00:13:48.793 | INFO     | __main__:main:309 | 
üì± Client NID: 69f0365f...
2025-12-30 00:13:48.793 | INFO     | __main__:main:315 | 
üîê Carregando certificados...
2025-12-30 00:13:48.793 | INFO     | common.security.certificate_manager:__init__:57 | CertificateManager inicializado para 69f0365f...
2025-12-30 00:13:48.793 | INFO     | common.security.certificate_manager:__init__:58 |    Diret√≥rio de certificados: /home/rafa/IOT/IOT/certs
2025-12-30 00:13:48.794 | INFO     | common.security.certificate_manager:initialize:150 | ============================================================
2025-12-30 00:13:48.794 | INFO     | common.security.certificate_manager:initialize:151 | A carregar certificados...
2025-12-30 00:13:48.794 | INFO     | common.security.certificate_manager:initialize:152 | ============================================================
2025-12-30 00:13:48.795 | ERROR    | common.security.certificate_manager:load_ca_certificate:124 | Certificado da CA n√£o encontrado: /home/rafa/IOT/IOT/certs/ca_certificate.pem
2025-12-30 00:13:48.795 | ERROR    | __main__:main:319 | ‚ùå Erro ao carregar certificados
2025-12-30 00:13:48.796 | ERROR    | __main__:main:320 | 
Verifique se existem certificados para este dispositivo:
2025-12-30 00:13:48.796 | ERROR    | __main__:main:321 |   certs/69f0365f-0b47-4449-8c75-558f4537cf85/certificate.pem
2025-12-30 00:13:48.796 | ERROR    | __main__:main:322 |   certs/69f0365f-0b47-4449-8c75-558f4537cf85/private_key.pem
2025-12-30 00:13:48.797 | ERROR    | __main__:main:323 |   certs/ca_certificate.pem
2025-12-30 00:18:39.650 | INFO     | __main__:main:306 | ============================================================
2025-12-30 00:18:39.650 | INFO     | __main__:main:307 |   Cliente BLE com Autentica√ß√£o X.509
2025-12-30 00:18:39.650 | INFO     | __main__:main:308 | ============================================================
2025-12-30 00:18:39.650 | INFO     | __main__:main:309 | 
üì± Client NID: 69f0365f...
2025-12-30 00:18:39.651 | INFO     | __main__:main:315 | 
üîê Carregando certificados...
2025-12-30 00:18:39.651 | INFO     | common.security.certificate_manager:__init__:57 | CertificateManager inicializado para 69f0365f...
2025-12-30 00:18:39.651 | INFO     | common.security.certificate_manager:__init__:58 |    Diret√≥rio de certificados: /home/rafa/IOT/IOT/certs
2025-12-30 00:18:39.652 | INFO     | common.security.certificate_manager:initialize:150 | ============================================================
2025-12-30 00:18:39.652 | INFO     | common.security.certificate_manager:initialize:151 | A carregar certificados...
2025-12-30 00:18:39.652 | INFO     | common.security.certificate_manager:initialize:152 | ============================================================
2025-12-30 00:18:39.763 | INFO     | common.security.certificate_manager:load_ca_certificate:134 | ‚úÖ Certificado da CA carregado: /home/rafa/IOT/IOT/certs/ca_certificate.pem
2025-12-30 00:18:39.764 | INFO     | common.security.certificate_manager:load_ca_certificate:135 |    Serial: 390882065628549426367143608417965902030398535790
2025-12-30 00:18:39.806 | INFO     | common.security.certificate_manager:load_device_certificate:96 | ‚úÖ Certificado do dispositivo carregado: /home/rafa/IOT/IOT/certs/69f0365f-0b47-4449-8c75-558f4537cf85/certificate.pem
2025-12-30 00:18:39.807 | INFO     | common.security.certificate_manager:load_device_certificate:97 |    Serial: 595377818982776629124640282954716968146495279119
2025-12-30 00:18:39.817 | INFO     | common.security.certificate_manager:initialize:162 | ============================================================
2025-12-30 00:18:39.818 | INFO     | common.security.certificate_manager:initialize:163 | ‚úÖ Todos os certificados carregados com sucesso!
2025-12-30 00:18:39.818 | INFO     | common.security.certificate_manager:initialize:164 | ============================================================
2025-12-30 00:18:39.819 | INFO     | __main__:main:327 | 
üîí Criando protocolo de autentica√ß√£o...
2025-12-30 00:18:39.819 | INFO     | common.security.authentication:__init__:126 | AuthenticationProtocol inicializado para 69f0365f...
2025-12-30 00:18:39.820 | INFO     | __main__:main:331 | 
üì° A escanear por servidores BLE...
2025-12-30 00:18:39.825 | INFO     | __main__:scan_for_server:69 | Usando adaptador: hci0 [A0:88:69:B6:F7:D2]
2025-12-30 00:18:39.825 | INFO     | __main__:scan_for_server:71 | A escanear por 5 segundos...
2025-12-30 00:18:45.031 | INFO     | __main__:scan_for_server:75 | Encontrados 1 dispositivos
2025-12-30 00:18:45.032 | INFO     | __main__:find_iot_server:102 | Servidor IoT encontrado: IoT-Auth-Server [E0:D3:62:D6:EE:A0]
2025-12-30 00:18:45.032 | INFO     | __main__:main:349 | 
üîó A conectar ao servidor: IoT-Auth-Server [E0:D3:62:D6:EE:A0]
2025-12-30 00:18:48.217 | INFO     | __main__:main:353 | ‚úÖ Conectado!
2025-12-30 00:18:48.218 | INFO     | __main__:authenticate_with_server:163 | 
============================================================
2025-12-30 00:18:48.218 | INFO     | __main__:authenticate_with_server:164 | üîê Iniciando Autentica√ß√£o
2025-12-30 00:18:48.219 | INFO     | __main__:authenticate_with_server:165 | ============================================================
2025-12-30 00:18:48.222 | INFO     | __main__:authenticate_with_server:185 | ‚úÖ AuthCharacteristic encontrada
2025-12-30 00:18:48.223 | INFO     | __main__:authenticate_with_server:186 |    Service: 12340000-0000-1000-8000-00805f9b34fb
2025-12-30 00:18:48.223 | INFO     | __main__:authenticate_with_server:187 |    Characteristic: 12340004-0000-1000-8000-00805f9b34fb
2025-12-30 00:18:48.224 | INFO     | __main__:authenticate_with_server:190 | 
üì° A subscrever indications de autentica√ß√£o...
2025-12-30 00:18:48.694 | INFO     | __main__:authenticate_with_server:198 | ‚úÖ Subscrito a indications
2025-12-30 00:18:48.695 | INFO     | __main__:authenticate_with_server:204 | 
--- Passo 1: Enviar certificado ao servidor ---
2025-12-30 00:18:48.696 | INFO     | common.security.authentication:start_authentication:135 | üîê Iniciando autentica√ß√£o - enviando certificado...
2025-12-30 00:18:48.697 | INFO     | common.security.authentication:start_authentication:146 |    Certificado: 908 bytes
2025-12-30 00:18:48.698 | INFO     | __main__:authenticate_with_server:206 | Enviando CERT_OFFER: 911 bytes
2025-12-30 00:18:49.294 | ERROR    | __main__:authenticate_with_server:216 | ‚ùå Erro ao enviar certificado: org.bluez.Error.InvalidArguments: Invalid Length
[70] method call[(null)->org.bluez] /org/bluez/hci0/dev_E0_D3_62_D6_EE_A0/service00c2/char00cb org.bluez.GattCharacteristic1 WriteValue
2025-12-30 00:18:49.295 | ERROR    | __main__:main:360 | ‚ùå Autentica√ß√£o falhou
2025-12-30 00:22:43.121 | INFO     | __main__:main:318 | ============================================================
2025-12-30 00:22:43.122 | INFO     | __main__:main:319 |   Cliente BLE com Autentica√ß√£o X.509
2025-12-30 00:22:43.122 | INFO     | __main__:main:320 | ============================================================
2025-12-30 00:22:43.122 | INFO     | __main__:main:321 | 
üì± Client NID: 69f0365f...
2025-12-30 00:22:43.122 | INFO     | __main__:main:327 | 
üîê Carregando certificados...
2025-12-30 00:22:43.123 | INFO     | common.security.certificate_manager:__init__:57 | CertificateManager inicializado para 69f0365f...
2025-12-30 00:22:43.123 | INFO     | common.security.certificate_manager:__init__:58 |    Diret√≥rio de certificados: /home/rafa/IOT/IOT/certs
2025-12-30 00:22:43.123 | INFO     | common.security.certificate_manager:initialize:150 | ============================================================
2025-12-30 00:22:43.123 | INFO     | common.security.certificate_manager:initialize:151 | A carregar certificados...
2025-12-30 00:22:43.124 | INFO     | common.security.certificate_manager:initialize:152 | ============================================================
2025-12-30 00:22:43.127 | INFO     | common.security.certificate_manager:load_ca_certificate:134 | ‚úÖ Certificado da CA carregado: /home/rafa/IOT/IOT/certs/ca_certificate.pem
2025-12-30 00:22:43.128 | INFO     | common.security.certificate_manager:load_ca_certificate:135 |    Serial: 390882065628549426367143608417965902030398535790
2025-12-30 00:22:43.130 | INFO     | common.security.certificate_manager:load_device_certificate:96 | ‚úÖ Certificado do dispositivo carregado: /home/rafa/IOT/IOT/certs/69f0365f-0b47-4449-8c75-558f4537cf85/certificate.pem
2025-12-30 00:22:43.130 | INFO     | common.security.certificate_manager:load_device_certificate:97 |    Serial: 595377818982776629124640282954716968146495279119
2025-12-30 00:22:43.131 | INFO     | common.security.certificate_manager:initialize:162 | ============================================================
2025-12-30 00:22:43.131 | INFO     | common.security.certificate_manager:initialize:163 | ‚úÖ Todos os certificados carregados com sucesso!
2025-12-30 00:22:43.131 | INFO     | common.security.certificate_manager:initialize:164 | ============================================================
2025-12-30 00:22:43.131 | INFO     | __main__:main:339 | 
üîí Criando protocolo de autentica√ß√£o...
2025-12-30 00:22:43.131 | INFO     | common.security.authentication:__init__:126 | AuthenticationProtocol inicializado para 69f0365f...
2025-12-30 00:22:43.132 | INFO     | __main__:main:343 | 
üì° A escanear por servidores BLE...
2025-12-30 00:22:43.135 | INFO     | __main__:scan_for_server:69 | Usando adaptador: hci0 [A0:88:69:B6:F7:D2]
2025-12-30 00:22:43.137 | INFO     | __main__:scan_for_server:71 | A escanear por 5 segundos...
2025-12-30 00:22:48.344 | INFO     | __main__:scan_for_server:75 | Encontrados 1 dispositivos
2025-12-30 00:22:48.345 | INFO     | __main__:find_iot_server:102 | Servidor IoT encontrado: IoT-Auth-Server [E0:D3:62:D6:EE:A0]
2025-12-30 00:22:48.345 | INFO     | __main__:main:361 | 
üîó A conectar ao servidor: IoT-Auth-Server [E0:D3:62:D6:EE:A0]
2025-12-30 00:22:51.989 | INFO     | __main__:main:365 | ‚úÖ Conectado!
2025-12-30 00:22:51.989 | INFO     | __main__:main:371 | 
üìè Negociando MTU...
2025-12-30 00:22:51.990 | INFO     | __main__:main:376 |    MTU ser√° negociado automaticamente pelo BLE
2025-12-30 00:22:51.991 | INFO     | __main__:main:377 |    Certificados grandes podem precisar de write_command ou fragmenta√ß√£o
2025-12-30 00:22:51.991 | INFO     | __main__:authenticate_with_server:163 | 
============================================================
2025-12-30 00:22:51.991 | INFO     | __main__:authenticate_with_server:164 | üîê Iniciando Autentica√ß√£o
2025-12-30 00:22:51.992 | INFO     | __main__:authenticate_with_server:165 | ============================================================
2025-12-30 00:22:51.995 | INFO     | __main__:authenticate_with_server:185 | ‚úÖ AuthCharacteristic encontrada
2025-12-30 00:22:51.996 | INFO     | __main__:authenticate_with_server:186 |    Service: 12340000-0000-1000-8000-00805f9b34fb
2025-12-30 00:22:51.997 | INFO     | __main__:authenticate_with_server:187 |    Characteristic: 12340004-0000-1000-8000-00805f9b34fb
2025-12-30 00:22:51.997 | INFO     | __main__:authenticate_with_server:190 | 
üì° A subscrever indications de autentica√ß√£o...
2025-12-30 00:22:52.691 | INFO     | __main__:authenticate_with_server:198 | ‚úÖ Subscrito a indications
2025-12-30 00:22:52.691 | INFO     | __main__:authenticate_with_server:204 | 
--- Passo 1: Enviar certificado ao servidor ---
2025-12-30 00:22:52.692 | INFO     | common.security.authentication:start_authentication:135 | üîê Iniciando autentica√ß√£o - enviando certificado...
2025-12-30 00:22:52.692 | INFO     | common.security.authentication:start_authentication:146 |    Certificado: 908 bytes
2025-12-30 00:22:52.693 | INFO     | __main__:authenticate_with_server:206 | Enviando CERT_OFFER: 911 bytes
2025-12-30 00:22:52.697 | ERROR    | __main__:authenticate_with_server:226 | ‚ùå Erro ao enviar certificado: org.bluez.Error.Failed: Failed to initiate write
[70] method call[(null)->org.bluez] /org/bluez/hci0/dev_E0_D3_62_D6_EE_A0/service00c2/char00cb org.bluez.GattCharacteristic1 WriteValue
2025-12-30 00:22:52.697 | INFO     | __main__:authenticate_with_server:227 |    Certificado muito grande para MTU atual
2025-12-30 00:22:52.697 | INFO     | __main__:authenticate_with_server:228 |    Ser√° necess√°rio implementar fragmenta√ß√£o
2025-12-30 00:22:52.698 | ERROR    | __main__:main:383 | ‚ùå Autentica√ß√£o falhou
2025-12-30 00:34:12.705 | INFO     | __main__:main:362 | ============================================================
2025-12-30 00:34:12.705 | INFO     | __main__:main:363 |   Cliente BLE com Autentica√ß√£o X.509
2025-12-30 00:34:12.705 | INFO     | __main__:main:364 | ============================================================
2025-12-30 00:34:12.705 | INFO     | __main__:main:365 | 
üì± Client NID: 69f0365f...
2025-12-30 00:34:12.706 | INFO     | __main__:main:371 | 
üîê Carregando certificados...
2025-12-30 00:34:12.706 | INFO     | common.security.certificate_manager:__init__:57 | CertificateManager inicializado para 69f0365f...
2025-12-30 00:34:12.706 | INFO     | common.security.certificate_manager:__init__:58 |    Diret√≥rio de certificados: /home/rafa/IOT/IOT/certs
2025-12-30 00:34:12.707 | INFO     | common.security.certificate_manager:initialize:150 | ============================================================
2025-12-30 00:34:12.707 | INFO     | common.security.certificate_manager:initialize:151 | A carregar certificados...
2025-12-30 00:34:12.707 | INFO     | common.security.certificate_manager:initialize:152 | ============================================================
2025-12-30 00:34:12.711 | INFO     | common.security.certificate_manager:load_ca_certificate:134 | ‚úÖ Certificado da CA carregado: /home/rafa/IOT/IOT/certs/ca_certificate.pem
2025-12-30 00:34:12.711 | INFO     | common.security.certificate_manager:load_ca_certificate:135 |    Serial: 390882065628549426367143608417965902030398535790
2025-12-30 00:34:12.713 | INFO     | common.security.certificate_manager:load_device_certificate:96 | ‚úÖ Certificado do dispositivo carregado: /home/rafa/IOT/IOT/certs/69f0365f-0b47-4449-8c75-558f4537cf85/certificate.pem
2025-12-30 00:34:12.713 | INFO     | common.security.certificate_manager:load_device_certificate:97 |    Serial: 595377818982776629124640282954716968146495279119
2025-12-30 00:34:12.714 | INFO     | common.security.certificate_manager:initialize:162 | ============================================================
2025-12-30 00:34:12.714 | INFO     | common.security.certificate_manager:initialize:163 | ‚úÖ Todos os certificados carregados com sucesso!
2025-12-30 00:34:12.715 | INFO     | common.security.certificate_manager:initialize:164 | ============================================================
2025-12-30 00:34:12.715 | INFO     | __main__:main:383 | 
üîí Criando protocolo de autentica√ß√£o...
2025-12-30 00:34:12.715 | INFO     | common.security.authentication:__init__:126 | AuthenticationProtocol inicializado para 69f0365f...
2025-12-30 00:34:12.715 | INFO     | __main__:main:387 | 
üì° A escanear por servidores BLE...
2025-12-30 00:34:12.719 | INFO     | __main__:scan_for_server:73 | Usando adaptador: hci0 [A0:88:69:B6:F7:D2]
2025-12-30 00:34:12.719 | INFO     | __main__:scan_for_server:75 | A escanear por 5 segundos...
2025-12-30 00:34:17.830 | INFO     | __main__:scan_for_server:79 | Encontrados 1 dispositivos
2025-12-30 00:34:17.831 | INFO     | __main__:find_iot_server:106 | Servidor IoT encontrado: IoT-Auth-Server [E0:D3:62:D6:EE:A0]
2025-12-30 00:34:17.831 | INFO     | __main__:main:405 | 
üîó A conectar ao servidor: IoT-Auth-Server [E0:D3:62:D6:EE:A0]
2025-12-30 00:34:21.822 | INFO     | __main__:main:409 | ‚úÖ Conectado!
2025-12-30 00:34:21.823 | INFO     | __main__:main:415 | 
üìè Negociando MTU...
2025-12-30 00:34:21.823 | INFO     | __main__:main:420 |    MTU ser√° negociado automaticamente pelo BLE
2025-12-30 00:34:21.824 | INFO     | __main__:main:421 |    Certificados grandes podem precisar de write_command ou fragmenta√ß√£o
2025-12-30 00:34:21.824 | INFO     | __main__:authenticate_with_server:167 | 
============================================================
2025-12-30 00:34:21.824 | INFO     | __main__:authenticate_with_server:168 | üîê Iniciando Autentica√ß√£o
2025-12-30 00:34:21.825 | INFO     | __main__:authenticate_with_server:169 | ============================================================
2025-12-30 00:34:21.826 | INFO     | __main__:authenticate_with_server:189 | ‚úÖ AuthCharacteristic encontrada
2025-12-30 00:34:21.827 | INFO     | __main__:authenticate_with_server:190 |    Service: 12340000-0000-1000-8000-00805f9b34fb
2025-12-30 00:34:21.827 | INFO     | __main__:authenticate_with_server:191 |    Characteristic: 12340004-0000-1000-8000-00805f9b34fb
2025-12-30 00:34:21.828 | INFO     | __main__:authenticate_with_server:194 | 
üì° A subscrever indications de autentica√ß√£o...
2025-12-30 00:34:22.318 | INFO     | __main__:authenticate_with_server:202 | ‚úÖ Subscrito a indications
2025-12-30 00:34:22.319 | INFO     | __main__:authenticate_with_server:208 | 
--- Passo 1: Enviar certificado ao servidor ---
2025-12-30 00:34:22.321 | INFO     | common.security.authentication:start_authentication:135 | üîê Iniciando autentica√ß√£o - enviando certificado...
2025-12-30 00:34:22.322 | INFO     | common.security.authentication:start_authentication:146 |    Certificado: 908 bytes
2025-12-30 00:34:22.323 | INFO     | __main__:authenticate_with_server:210 | Enviando CERT_OFFER: 911 bytes
2025-12-30 00:34:22.324 | INFO     | common.ble.fragmentation:fragment_message:98 | Fragmentando mensagem de 911 bytes em 6 fragmentos
2025-12-30 00:34:22.325 | INFO     | __main__:authenticate_with_server:214 | üì¶ Certificado dividido em 6 fragmentos
2025-12-30 00:34:22.326 | INFO     | __main__:authenticate_with_server:219 |    Enviando fragmento 1/6: 183 bytes
2025-12-30 00:34:22.383 | INFO     | __main__:authenticate_with_server:219 |    Enviando fragmento 2/6: 183 bytes
2025-12-30 00:34:22.435 | INFO     | __main__:authenticate_with_server:219 |    Enviando fragmento 3/6: 183 bytes
2025-12-30 00:34:22.472 | INFO     | __main__:indication_handler:144 | üîê Indication de autentica√ß√£o recebida: 136 bytes
2025-12-30 00:34:22.488 | INFO     | __main__:authenticate_with_server:219 |    Enviando fragmento 4/6: 183 bytes
2025-12-30 00:34:22.542 | INFO     | __main__:authenticate_with_server:219 |    Enviando fragmento 5/6: 183 bytes
2025-12-30 00:34:22.567 | INFO     | __main__:indication_handler:144 | üîê Indication de autentica√ß√£o recebida: 0 bytes
2025-12-30 00:34:22.596 | INFO     | __main__:authenticate_with_server:219 |    Enviando fragmento 6/6: 14 bytes
2025-12-30 00:34:22.598 | INFO     | __main__:authenticate_with_server:240 | ‚úÖ Todos os fragmentos enviados
2025-12-30 00:34:22.668 | INFO     | __main__:indication_handler:144 | üîê Indication de autentica√ß√£o recebida: 0 bytes
2025-12-30 00:34:22.767 | INFO     | __main__:indication_handler:144 | üîê Indication de autentica√ß√£o recebida: 0 bytes
2025-12-30 00:34:22.867 | INFO     | __main__:indication_handler:144 | üîê Indication de autentica√ß√£o recebida: 0 bytes
2025-12-30 00:34:22.968 | INFO     | __main__:indication_handler:144 | üîê Indication de autentica√ß√£o recebida: 0 bytes
2025-12-30 00:34:28.067 | ERROR    | __main__:authenticate_with_server:340 | ‚ùå Timeout na autentica√ß√£o
2025-12-30 00:34:28.068 | ERROR    | __main__:main:427 | ‚ùå Autentica√ß√£o falhou
2025-12-30 00:38:10.800 | INFO     | __main__:main:362 | ============================================================
2025-12-30 00:38:10.801 | INFO     | __main__:main:363 |   Cliente BLE com Autentica√ß√£o X.509
2025-12-30 00:38:10.801 | INFO     | __main__:main:364 | ============================================================
2025-12-30 00:38:10.801 | INFO     | __main__:main:365 | 
üì± Client NID: 69f0365f...
2025-12-30 00:38:10.801 | INFO     | __main__:main:371 | 
üîê Carregando certificados...
2025-12-30 00:38:10.801 | INFO     | common.security.certificate_manager:__init__:57 | CertificateManager inicializado para 69f0365f...
2025-12-30 00:38:10.802 | INFO     | common.security.certificate_manager:__init__:58 |    Diret√≥rio de certificados: /home/rafa/IOT/IOT/certs
2025-12-30 00:38:10.802 | INFO     | common.security.certificate_manager:initialize:150 | ============================================================
2025-12-30 00:38:10.802 | INFO     | common.security.certificate_manager:initialize:151 | A carregar certificados...
2025-12-30 00:38:10.802 | INFO     | common.security.certificate_manager:initialize:152 | ============================================================
2025-12-30 00:38:10.806 | INFO     | common.security.certificate_manager:load_ca_certificate:134 | ‚úÖ Certificado da CA carregado: /home/rafa/IOT/IOT/certs/ca_certificate.pem
2025-12-30 00:38:10.807 | INFO     | common.security.certificate_manager:load_ca_certificate:135 |    Serial: 390882065628549426367143608417965902030398535790
2025-12-30 00:38:10.808 | INFO     | common.security.certificate_manager:load_device_certificate:96 | ‚úÖ Certificado do dispositivo carregado: /home/rafa/IOT/IOT/certs/69f0365f-0b47-4449-8c75-558f4537cf85/certificate.pem
2025-12-30 00:38:10.809 | INFO     | common.security.certificate_manager:load_device_certificate:97 |    Serial: 595377818982776629124640282954716968146495279119
2025-12-30 00:38:10.809 | INFO     | common.security.certificate_manager:initialize:162 | ============================================================
2025-12-30 00:38:10.809 | INFO     | common.security.certificate_manager:initialize:163 | ‚úÖ Todos os certificados carregados com sucesso!
2025-12-30 00:38:10.810 | INFO     | common.security.certificate_manager:initialize:164 | ============================================================
2025-12-30 00:38:10.810 | INFO     | __main__:main:383 | 
üîí Criando protocolo de autentica√ß√£o...
2025-12-30 00:38:10.810 | INFO     | common.security.authentication:__init__:126 | AuthenticationProtocol inicializado para 69f0365f...
2025-12-30 00:38:10.810 | INFO     | __main__:main:387 | 
üì° A escanear por servidores BLE...
2025-12-30 00:38:10.813 | INFO     | __main__:scan_for_server:73 | Usando adaptador: hci0 [A0:88:69:B6:F7:D2]
2025-12-30 00:38:10.814 | INFO     | __main__:scan_for_server:75 | A escanear por 5 segundos...
2025-12-30 00:38:16.018 | INFO     | __main__:scan_for_server:79 | Encontrados 1 dispositivos
2025-12-30 00:38:16.019 | INFO     | __main__:find_iot_server:106 | Servidor IoT encontrado: IoT-Auth-Server [E0:D3:62:D6:EE:A0]
2025-12-30 00:38:16.019 | INFO     | __main__:main:405 | 
üîó A conectar ao servidor: IoT-Auth-Server [E0:D3:62:D6:EE:A0]
2025-12-30 00:38:19.262 | INFO     | __main__:main:409 | ‚úÖ Conectado!
2025-12-30 00:38:19.263 | INFO     | __main__:main:415 | 
üìè Negociando MTU...
2025-12-30 00:38:19.264 | INFO     | __main__:main:420 |    MTU ser√° negociado automaticamente pelo BLE
2025-12-30 00:38:19.265 | INFO     | __main__:main:421 |    Certificados grandes podem precisar de write_command ou fragmenta√ß√£o
2025-12-30 00:38:19.266 | INFO     | __main__:authenticate_with_server:167 | 
============================================================
2025-12-30 00:38:19.267 | INFO     | __main__:authenticate_with_server:168 | üîê Iniciando Autentica√ß√£o
2025-12-30 00:38:19.267 | INFO     | __main__:authenticate_with_server:169 | ============================================================
2025-12-30 00:38:19.271 | INFO     | __main__:authenticate_with_server:189 | ‚úÖ AuthCharacteristic encontrada
2025-12-30 00:38:19.272 | INFO     | __main__:authenticate_with_server:190 |    Service: 12340000-0000-1000-8000-00805f9b34fb
2025-12-30 00:38:19.272 | INFO     | __main__:authenticate_with_server:191 |    Characteristic: 12340004-0000-1000-8000-00805f9b34fb
2025-12-30 00:38:19.273 | INFO     | __main__:authenticate_with_server:194 | 
üì° A subscrever indications de autentica√ß√£o...
2025-12-30 00:38:19.775 | INFO     | __main__:authenticate_with_server:202 | ‚úÖ Subscrito a indications
2025-12-30 00:38:19.776 | INFO     | __main__:authenticate_with_server:208 | 
--- Passo 1: Enviar certificado ao servidor ---
2025-12-30 00:38:19.776 | INFO     | common.security.authentication:start_authentication:135 | üîê Iniciando autentica√ß√£o - enviando certificado...
2025-12-30 00:38:19.777 | INFO     | common.security.authentication:start_authentication:146 |    Certificado: 908 bytes
2025-12-30 00:38:19.778 | INFO     | __main__:authenticate_with_server:210 | Enviando CERT_OFFER: 911 bytes
2025-12-30 00:38:19.779 | INFO     | common.ble.fragmentation:fragment_message:98 | Fragmentando mensagem de 911 bytes em 6 fragmentos
2025-12-30 00:38:19.780 | INFO     | __main__:authenticate_with_server:214 | üì¶ Certificado dividido em 6 fragmentos
2025-12-30 00:38:19.780 | INFO     | __main__:authenticate_with_server:219 |    Enviando fragmento 1/6: 183 bytes
2025-12-30 00:38:19.837 | INFO     | __main__:authenticate_with_server:219 |    Enviando fragmento 2/6: 183 bytes
2025-12-30 00:38:19.889 | INFO     | __main__:authenticate_with_server:219 |    Enviando fragmento 3/6: 183 bytes
2025-12-30 00:38:19.941 | INFO     | __main__:authenticate_with_server:219 |    Enviando fragmento 4/6: 183 bytes
2025-12-30 00:38:19.996 | INFO     | __main__:authenticate_with_server:219 |    Enviando fragmento 5/6: 183 bytes
2025-12-30 00:38:20.050 | INFO     | __main__:authenticate_with_server:219 |    Enviando fragmento 6/6: 14 bytes
2025-12-30 00:38:20.052 | INFO     | __main__:authenticate_with_server:240 | ‚úÖ Todos os fragmentos enviados
2025-12-30 00:38:20.123 | INFO     | __main__:indication_handler:144 | üîê Indication de autentica√ß√£o recebida: 38 bytes
2025-12-30 00:38:25.523 | ERROR    | __main__:authenticate_with_server:340 | ‚ùå Timeout na autentica√ß√£o
2025-12-30 00:38:25.524 | ERROR    | __main__:main:427 | ‚ùå Autentica√ß√£o falhou
2025-12-30 00:43:08.583 | INFO     | __main__:main:362 | ============================================================
2025-12-30 00:43:08.583 | INFO     | __main__:main:363 |   Cliente BLE com Autentica√ß√£o X.509
2025-12-30 00:43:08.584 | INFO     | __main__:main:364 | ============================================================
2025-12-30 00:43:08.584 | INFO     | __main__:main:365 | 
üì± Client NID: 69f0365f...
2025-12-30 00:43:08.584 | INFO     | __main__:main:371 | 
üîê Carregando certificados...
2025-12-30 00:43:08.584 | INFO     | common.security.certificate_manager:__init__:57 | CertificateManager inicializado para 69f0365f...
2025-12-30 00:43:08.585 | INFO     | common.security.certificate_manager:__init__:58 |    Diret√≥rio de certificados: /home/rafa/IOT/IOT/certs
2025-12-30 00:43:08.585 | INFO     | common.security.certificate_manager:initialize:150 | ============================================================
2025-12-30 00:43:08.585 | INFO     | common.security.certificate_manager:initialize:151 | A carregar certificados...
2025-12-30 00:43:08.585 | INFO     | common.security.certificate_manager:initialize:152 | ============================================================
2025-12-30 00:43:08.589 | INFO     | common.security.certificate_manager:load_ca_certificate:134 | ‚úÖ Certificado da CA carregado: /home/rafa/IOT/IOT/certs/ca_certificate.pem
2025-12-30 00:43:08.589 | INFO     | common.security.certificate_manager:load_ca_certificate:135 |    Serial: 390882065628549426367143608417965902030398535790
2025-12-30 00:43:08.591 | INFO     | common.security.certificate_manager:load_device_certificate:96 | ‚úÖ Certificado do dispositivo carregado: /home/rafa/IOT/IOT/certs/69f0365f-0b47-4449-8c75-558f4537cf85/certificate.pem
2025-12-30 00:43:08.591 | INFO     | common.security.certificate_manager:load_device_certificate:97 |    Serial: 595377818982776629124640282954716968146495279119
2025-12-30 00:43:08.592 | INFO     | common.security.certificate_manager:initialize:162 | ============================================================
2025-12-30 00:43:08.592 | INFO     | common.security.certificate_manager:initialize:163 | ‚úÖ Todos os certificados carregados com sucesso!
2025-12-30 00:43:08.593 | INFO     | common.security.certificate_manager:initialize:164 | ============================================================
2025-12-30 00:43:08.593 | INFO     | __main__:main:383 | 
üîí Criando protocolo de autentica√ß√£o...
2025-12-30 00:43:08.593 | INFO     | common.security.authentication:__init__:126 | AuthenticationProtocol inicializado para 69f0365f...
2025-12-30 00:43:08.594 | INFO     | __main__:main:387 | 
üì° A escanear por servidores BLE...
2025-12-30 00:43:08.597 | INFO     | __main__:scan_for_server:77 | Usando adaptador: hci0 [A0:88:69:B6:F7:D2]
2025-12-30 00:43:08.598 | INFO     | __main__:scan_for_server:79 | A escanear por 5 segundos...
2025-12-30 00:43:13.800 | INFO     | __main__:scan_for_server:83 | Encontrados 0 dispositivos
2025-12-30 00:43:13.801 | ERROR    | __main__:main:391 | ‚ùå Nenhum dispositivo encontrado
2025-12-30 00:43:18.487 | INFO     | __main__:main:362 | ============================================================
2025-12-30 00:43:18.488 | INFO     | __main__:main:363 |   Cliente BLE com Autentica√ß√£o X.509
2025-12-30 00:43:18.488 | INFO     | __main__:main:364 | ============================================================
2025-12-30 00:43:18.488 | INFO     | __main__:main:365 | 
üì± Client NID: 69f0365f...
2025-12-30 00:43:18.488 | INFO     | __main__:main:371 | 
üîê Carregando certificados...
2025-12-30 00:43:18.489 | INFO     | common.security.certificate_manager:__init__:57 | CertificateManager inicializado para 69f0365f...
2025-12-30 00:43:18.489 | INFO     | common.security.certificate_manager:__init__:58 |    Diret√≥rio de certificados: /home/rafa/IOT/IOT/certs
2025-12-30 00:43:18.489 | INFO     | common.security.certificate_manager:initialize:150 | ============================================================
2025-12-30 00:43:18.489 | INFO     | common.security.certificate_manager:initialize:151 | A carregar certificados...
2025-12-30 00:43:18.489 | INFO     | common.security.certificate_manager:initialize:152 | ============================================================
2025-12-30 00:43:18.494 | INFO     | common.security.certificate_manager:load_ca_certificate:134 | ‚úÖ Certificado da CA carregado: /home/rafa/IOT/IOT/certs/ca_certificate.pem
2025-12-30 00:43:18.494 | INFO     | common.security.certificate_manager:load_ca_certificate:135 |    Serial: 390882065628549426367143608417965902030398535790
2025-12-30 00:43:18.496 | INFO     | common.security.certificate_manager:load_device_certificate:96 | ‚úÖ Certificado do dispositivo carregado: /home/rafa/IOT/IOT/certs/69f0365f-0b47-4449-8c75-558f4537cf85/certificate.pem
2025-12-30 00:43:18.496 | INFO     | common.security.certificate_manager:load_device_certificate:97 |    Serial: 595377818982776629124640282954716968146495279119
2025-12-30 00:43:18.496 | INFO     | common.security.certificate_manager:initialize:162 | ============================================================
2025-12-30 00:43:18.496 | INFO     | common.security.certificate_manager:initialize:163 | ‚úÖ Todos os certificados carregados com sucesso!
2025-12-30 00:43:18.497 | INFO     | common.security.certificate_manager:initialize:164 | ============================================================
2025-12-30 00:43:18.497 | INFO     | __main__:main:383 | 
üîí Criando protocolo de autentica√ß√£o...
2025-12-30 00:43:18.497 | INFO     | common.security.authentication:__init__:126 | AuthenticationProtocol inicializado para 69f0365f...
2025-12-30 00:43:18.497 | INFO     | __main__:main:387 | 
üì° A escanear por servidores BLE...
2025-12-30 00:43:18.499 | INFO     | __main__:scan_for_server:77 | Usando adaptador: hci0 [A0:88:69:B6:F7:D2]
2025-12-30 00:43:18.500 | INFO     | __main__:scan_for_server:79 | A escanear por 5 segundos...
2025-12-30 00:43:23.704 | INFO     | __main__:scan_for_server:83 | Encontrados 1 dispositivos
2025-12-30 00:43:23.705 | INFO     | __main__:find_iot_server:110 | Servidor IoT encontrado: IoT-Auth-Server [E0:D3:62:D6:EE:A0]
2025-12-30 00:43:23.706 | INFO     | __main__:main:405 | 
üîó A conectar ao servidor: IoT-Auth-Server [E0:D3:62:D6:EE:A0]
2025-12-30 00:43:26.879 | INFO     | __main__:main:409 | ‚úÖ Conectado!
2025-12-30 00:43:26.880 | INFO     | __main__:main:415 | 
üìè Negociando MTU...
2025-12-30 00:43:26.880 | INFO     | __main__:main:420 |    MTU ser√° negociado automaticamente pelo BLE
2025-12-30 00:43:26.882 | INFO     | __main__:main:421 |    Certificados grandes podem precisar de write_command ou fragmenta√ß√£o
2025-12-30 00:43:26.883 | INFO     | __main__:authenticate_with_server:168 | 
============================================================
2025-12-30 00:43:26.884 | INFO     | __main__:authenticate_with_server:169 | üîê Iniciando Autentica√ß√£o
2025-12-30 00:43:26.884 | INFO     | __main__:authenticate_with_server:170 | ============================================================
2025-12-30 00:43:26.889 | INFO     | __main__:authenticate_with_server:190 | ‚úÖ AuthCharacteristic encontrada
2025-12-30 00:43:26.890 | INFO     | __main__:authenticate_with_server:191 |    Service: 12340000-0000-1000-8000-00805f9b34fb
2025-12-30 00:43:26.891 | INFO     | __main__:authenticate_with_server:192 |    Characteristic: 12340004-0000-1000-8000-00805f9b34fb
2025-12-30 00:43:26.892 | INFO     | __main__:authenticate_with_server:195 | 
üì° A subscrever indications de autentica√ß√£o...
2025-12-30 00:43:27.382 | INFO     | __main__:authenticate_with_server:203 | ‚úÖ Subscrito a indications
2025-12-30 00:43:27.383 | INFO     | __main__:authenticate_with_server:209 | 
--- Passo 1: Enviar certificado ao servidor ---
2025-12-30 00:43:27.383 | INFO     | common.security.authentication:start_authentication:135 | üîê Iniciando autentica√ß√£o - enviando certificado...
2025-12-30 00:43:27.384 | INFO     | common.security.authentication:start_authentication:146 |    Certificado: 908 bytes
2025-12-30 00:43:27.385 | INFO     | __main__:authenticate_with_server:211 | Enviando CERT_OFFER: 911 bytes
2025-12-30 00:43:27.385 | INFO     | common.ble.fragmentation:fragment_message:98 | Fragmentando mensagem de 911 bytes em 6 fragmentos
2025-12-30 00:43:27.386 | INFO     | __main__:authenticate_with_server:215 | üì¶ Certificado dividido em 6 fragmentos
2025-12-30 00:43:27.387 | INFO     | __main__:authenticate_with_server:220 |    Enviando fragmento 1/6: 183 bytes
2025-12-30 00:43:27.442 | INFO     | __main__:authenticate_with_server:220 |    Enviando fragmento 2/6: 183 bytes
2025-12-30 00:43:27.495 | INFO     | __main__:authenticate_with_server:220 |    Enviando fragmento 3/6: 183 bytes
2025-12-30 00:43:27.547 | INFO     | __main__:authenticate_with_server:220 |    Enviando fragmento 4/6: 183 bytes
2025-12-30 00:43:27.603 | INFO     | __main__:authenticate_with_server:220 |    Enviando fragmento 5/6: 183 bytes
2025-12-30 00:43:27.658 | INFO     | __main__:authenticate_with_server:220 |    Enviando fragmento 6/6: 14 bytes
2025-12-30 00:43:27.661 | INFO     | __main__:authenticate_with_server:241 | ‚úÖ Todos os fragmentos enviados
2025-12-30 00:43:27.780 | INFO     | __main__:indication_handler:146 | üîê Indication de autentica√ß√£o recebida: 38 bytes
2025-12-30 00:43:28.662 | INFO     | common.ble.fragmentation:add_fragment:165 | Iniciando recep√ß√£o de 1 fragmentos
2025-12-30 00:43:28.663 | INFO     | common.ble.fragmentation:add_fragment:203 | ‚úÖ Mensagem reconstru√≠da: 35 bytes (1 fragmentos)
2025-12-30 00:43:28.663 | INFO     | __main__:authenticate_with_server:295 | 
--- Passo 2: Processar resposta do servidor ---
2025-12-30 00:43:28.664 | INFO     | __main__:authenticate_with_server:296 | Resposta completa recebida: 35 bytes
2025-12-30 00:43:28.665 | INFO     | common.security.authentication:handle_challenge:214 | üé≤ Challenge recebido - gerando response...
2025-12-30 00:43:28.733 | INFO     | common.security.authentication:handle_challenge:230 | ‚úçÔ∏è  Response gerada: 139 bytes
2025-12-30 00:43:28.733 | INFO     | __main__:authenticate_with_server:301 | Estado atual: CHALLENGE_RECEIVED
2025-12-30 00:43:28.734 | INFO     | __main__:authenticate_with_server:304 | Enviando resposta: 142 bytes
2025-12-30 00:43:28.734 | INFO     | __main__:authenticate_with_server:308 | üì¶ Resposta dividida em 1 fragmentos
2025-12-30 00:43:28.831 | INFO     | __main__:indication_handler:146 | üîê Indication de autentica√ß√£o recebida: 6 bytes
2025-12-30 00:43:29.736 | INFO     | common.ble.fragmentation:add_fragment:165 | Iniciando recep√ß√£o de 1 fragmentos
2025-12-30 00:43:29.738 | INFO     | common.ble.fragmentation:add_fragment:203 | ‚úÖ Mensagem reconstru√≠da: 3 bytes (1 fragmentos)
2025-12-30 00:43:29.739 | INFO     | __main__:authenticate_with_server:295 | 
--- Passo 3: Processar resposta do servidor ---
2025-12-30 00:43:29.740 | INFO     | __main__:authenticate_with_server:296 | Resposta completa recebida: 3 bytes
2025-12-30 00:43:29.740 | INFO     | common.security.authentication:handle_auth_success:290 | ‚úÖ Peer confirmou autentica√ß√£o bem sucedida!
2025-12-30 00:43:29.741 | INFO     | __main__:authenticate_with_server:301 | Estado atual: AUTHENTICATED
2025-12-30 00:43:29.741 | INFO     | __main__:main:432 | 
üíì A subscrever notifica√ß√µes de heartbeat...
2025-12-30 00:43:29.832 | INFO     | __main__:main:454 | ‚úÖ Subscrito a heartbeats
2025-12-30 00:43:29.833 | INFO     | __main__:main:459 | 
============================================================
2025-12-30 00:43:29.833 | INFO     | __main__:main:460 | ‚úÖ CLIENTE AUTENTICADO E A RECEBER HEARTBEATS
2025-12-30 00:43:29.834 | INFO     | __main__:main:461 | ============================================================
2025-12-30 00:43:29.834 | INFO     | __main__:main:462 | 
A aguardar heartbeats... (Ctrl+C para sair)

2025-12-30 00:43:31.186 | INFO     | __main__:notification_handler:123 | üíì Notifica√ß√£o recebida: 158 bytes
2025-12-30 00:43:31.187 | INFO     | __main__:notification_handler:128 |    Source: 323b6aad...
2025-12-30 00:43:31.187 | INFO     | __main__:notification_handler:129 |    Destination: 323b6aad...
2025-12-30 00:43:31.187 | INFO     | __main__:notification_handler:130 |    Type: 2
2025-12-30 00:43:31.187 | INFO     | __main__:notification_handler:131 |    Sequence: 77
2025-12-30 00:43:31.188 | INFO     | __main__:notification_handler:132 |    Payload: 88 bytes
2025-12-30 00:43:36.186 | INFO     | __main__:notification_handler:123 | üíì Notifica√ß√£o recebida: 158 bytes
2025-12-30 00:43:36.187 | INFO     | __main__:notification_handler:128 |    Source: 323b6aad...
2025-12-30 00:43:36.188 | INFO     | __main__:notification_handler:129 |    Destination: 323b6aad...
2025-12-30 00:43:36.188 | INFO     | __main__:notification_handler:130 |    Type: 2
2025-12-30 00:43:36.189 | INFO     | __main__:notification_handler:131 |    Sequence: 78
2025-12-30 00:43:36.190 | INFO     | __main__:notification_handler:132 |    Payload: 88 bytes
2025-12-30 00:43:41.185 | INFO     | __main__:notification_handler:123 | üíì Notifica√ß√£o recebida: 158 bytes
2025-12-30 00:43:41.186 | INFO     | __main__:notification_handler:128 |    Source: 323b6aad...
2025-12-30 00:43:41.187 | INFO     | __main__:notification_handler:129 |    Destination: 323b6aad...
2025-12-30 00:43:41.187 | INFO     | __main__:notification_handler:130 |    Type: 2
2025-12-30 00:43:41.188 | INFO     | __main__:notification_handler:131 |    Sequence: 79
2025-12-30 00:43:41.188 | INFO     | __main__:notification_handler:132 |    Payload: 88 bytes
2025-12-30 00:43:44.783 | INFO     | __main__:main:468 | 

A terminar...
2025-12-30 00:43:44.784 | INFO     | __main__:main:471 | Desconectando...
2025-12-30 00:43:47.288 | INFO     | __main__:main:473 | ‚úÖ Desconectado
